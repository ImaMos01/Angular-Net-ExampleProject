<form>
    <mat-form-field>
        <input type="text" placeholder="Select authors" matInput [formControl]="control" [matAutocomplete]="auto"/>
        <mat-autocomplete #auto (optionSelected)="selectedAuthor($event)">
            @for (item of authors; track $index) {
                <mat-option [value]="item">
                    <img [src]="item.photo" />
                    {{item.name}}
                </mat-option>
            }
        </mat-autocomplete>
    </mat-form-field>
</form>

@if (selectedAuthors.length > 0) {
    <table mat-table [dataSource]="selectedAuthors" class="mat-elevation-z8">
        <ng-container matColumnDef="image">
            <td mat-cell *matCellDef="let author">
                <img style="width:50px" [src]="author.photo" />
            </td>
        </ng-container>

        <ng-container matColumnDef="name">
            <td mat-cell *matCellDef="let author">
                {{author.name}}
            </td>
        </ng-container>

        <ng-container matColumnDef="nickname">
            <td mat-cell *matCellDef="let author">
                <mat-form-field appearance="outline" style="margin: 10px 0">
                    <mat-label>Nickname</mat-label>
                    <input matInput [(ngModel)]="author.nickname"/>
                </mat-form-field>
            </td>
        </ng-container>

        <ng-container matColumnDef="actions">
            <td mat-cell *matCellDef="let author">
                <mat-icon mat-list-icon (click)="removeAuthor(author)">
                    Close
                </mat-icon>
            </td>
        </ng-container>

        <tr mat-row *matRowDef="let row; columns: showColumn"></tr>
    </table>
}